{"version":3,"sources":["components/examList/examItem/hoc.tsx"],"names":["__webpack_exports__","WrappedComponent","_a","_super","class_1","props","_this","call","this","state","refreshing","height","document","documentElement","clientHeight","announceSwitch","reportArr","modelSwitch","grade","examName","exam_id","__extends","prototype","componentDidMount","__WEBPACK_IMPORTED_MODULE_2_react_dom__","hei_1","offsetTop","setTimeout","setState","refresh","dispatch","currPage","exam_list","_currPage","type","payload","initSwitch","sent","openReport","req","_i","arguments","length","promulgate","closeOwnModel","toReport","reportId","context","router","history","push","pathname","group_id","render","__assign","ptr","bind","__WEBPACK_IMPORTED_MODULE_1_react__","contextTypes","__WEBPACK_IMPORTED_MODULE_0_prop_types__","isRequired"],"mappings":"qiEA8IeA,EAAA,QArHH,SAACC,SAET,OAAAC,EAAA,SAAAC,GAKI,SAAAC,EAAYC,GAAZ,IAAAC,EACIH,EAAAI,KAAAC,KAAMH,IAAMG,YACZF,EAAKG,OACDC,YAAY,EACZC,OAAQC,SAASC,gBAAgBC,aACjCC,gBAAgB,EAChBC,aACAC,aAAa,EACbC,MAAO,GACPC,SAAU,GACVC,QAAS,MAiGrB,OAhHqBC,EAAAjB,EAAAD,GAmBjBC,EAAAkB,UAAAC,kBAAA,eAAAjB,EAAAE,KACI,GAAIgB,EAAA,YAvBD,MAuB4B,CAE3B,IAAMC,EAAMjB,KAAKC,MAAME,OAASa,EAAA,YAzBjC,MAyB2DE,UAAY,GACtEC,WAAW,WAAM,OAAArB,EAAKsB,UAClBjB,OAAQc,KACR,KAOErB,EAAAkB,UAAAO,QAAd,2GACIrB,KAAKoB,UAAUlB,YAAY,IACtBoB,EAAYtB,KAAKH,MAAKyB,0BAGvB,6BADIC,EAAWvB,KAAKH,MAAM2B,UAAUC,WACpC,EAAMH,GACFI,KAAM,sBACNC,SACIJ,SAAQA,EACRK,YAAY,oBAJpBlC,EAAAmC,OAOA7B,KAAKoB,UAAUlB,YAAY,8DAQ3BN,EAAAkB,UAAAgB,WAAR,mBAAAhC,EAAAE,KAAmB+B,KAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACV,IAAAG,EAAAJ,EAAA,GAAYvB,EAAAuB,EAAA,GAAWrB,EAAAqB,EAAA,GAAOpB,EAAAoB,EAAA,GAAUnB,EAAAmB,EAAA,GACxCI,EAYDnC,KAAKoB,UACDZ,UAASA,EACTC,aAAa,EACbC,MAAKA,EACLC,SAAQA,EACRC,QAAOA,KAfXZ,KAAKoB,UACDb,gBAAgB,IAEpBY,WAAW,WACPrB,EAAKsB,UACDb,gBAAgB,KAErB,OAcHX,EAAAkB,UAAAsB,cAAR,WACIpC,KAAKoB,UACDX,aAAa,KAKbb,EAAAkB,UAAAuB,SAAR,SAAiBC,GACbtC,KAAKuC,QAAQC,OAAOC,QAAQC,MACxBC,SAAU,iBACV1C,OACI2C,SAAUN,EACV5B,MAAOV,KAAKC,MAAMS,MAClBC,SAAUX,KAAKC,MAAMU,SACrBC,QAASZ,KAAKC,MAAMW,YAMzBhB,EAAAkB,UAAA+B,OAAP,WACI,IAAMhD,EAAKiD,KACJ9C,KAAKH,OACRkD,IAvGD,KAwGC9C,MAAOD,KAAKC,MACZoB,QAASrB,KAAKqB,QAAQ2B,KAAKhD,MAC3B8B,WAAY9B,KAAK8B,WAAWkB,KAAKhD,MACjCoC,cAAepC,KAAKoC,cAAcY,KAAKhD,MACvCqC,SAAUrC,KAAKqC,SAASW,KAAKhD,QAEjC,OAAOiD,EAAA,cAACxD,EAAgBqD,KAChBjD,KAIhBD,EAhHA,CAAqBqD,EAAA,YACVC,cACHV,OAAQW,EAAA,OAAiBC","file":"static/js/31.73e7f8d5.chunk.js","sourcesContent":["import * as PropTypes from \"prop-types\";\r\nimport * as React from \"react\";\r\nimport {Component} from \"react\";\r\n//@ts-ignore\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\n\r\ntype PageOwnProps = {\r\n    exam_list: any,\r\n    location: any,\r\n    dispatch: any\r\n}\r\n\r\ntype PageState = {\r\n    refreshing: boolean,\r\n    height: number,\r\n    announceSwitch: boolean,\r\n    reportArr: any[],\r\n    modelSwitch: boolean,\r\n    grade: string,\r\n    examName: string,\r\n    exam_id: string | number\r\n}\r\n\r\nlet ptr: any = null;\r\nconst hoc = (WrappedComponent: React.ComponentType<{}>): React.ComponentClass<{}> => {\r\n\r\n    return class extends Component<PageOwnProps, PageState> {\r\n        static contextTypes = {\r\n            router: PropTypes.object.isRequired,\r\n        };\r\n\r\n        constructor(props: any) {\r\n            super(props);\r\n            this.state = {\r\n                refreshing: false,//是否显示刷新状态\r\n                height: document.documentElement.clientHeight,\r\n                announceSwitch: false,//成绩暂未公布的显示开关\r\n                reportArr: [],//报告列表\r\n                modelSwitch: false,//报告模态框的开关\r\n                grade: '',//年纪\r\n                examName: '',//\r\n                exam_id: '',//考试的ID\r\n            }\r\n        }\r\n\r\n        componentDidMount() {\r\n            if (ReactDOM.findDOMNode(ptr)) {\r\n                //@ts-ignore\r\n                const hei = this.state.height - ReactDOM.findDOMNode(ptr).offsetTop - 57;\r\n                setTimeout(() => this.setState({\r\n                    height: hei,\r\n                }), 0);\r\n            }\r\n\r\n        }\r\n\r\n\r\n        //上拉刷新的回调函数\r\n        private async refresh() {\r\n            this.setState({refreshing: true});\r\n            let {dispatch} = this.props;\r\n            try {\r\n                let currPage = this.props.exam_list._currPage;\r\n                await dispatch({\r\n                    type: \"exam_list/queryExam\",\r\n                    payload: {\r\n                        currPage,\r\n                        initSwitch: false\r\n                    }\r\n                });\r\n                this.setState({refreshing: false});\r\n            } catch (e) {\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //打开报告\r\n        private openReport(...req: any) {\r\n            let [promulgate, reportArr, grade, examName, exam_id] = req;\r\n            if (!promulgate) {\r\n                //报告暂未开放\r\n                this.setState({\r\n                    announceSwitch: true,\r\n                });\r\n                setTimeout(() => {\r\n                    this.setState({\r\n                        announceSwitch: false\r\n                    });\r\n                }, 1000)\r\n            } else {\r\n                //报告开放\r\n                this.setState({\r\n                    reportArr,\r\n                    modelSwitch: true,\r\n                    grade,\r\n                    examName,\r\n                    exam_id\r\n                });\r\n            }\r\n        }\r\n\r\n        //关闭报告模态框\r\n        private closeOwnModel() {\r\n            this.setState({\r\n                modelSwitch: false\r\n            })\r\n        }\r\n\r\n        //跳转到选择报告页面\r\n        private toReport(reportId: any) {\r\n            this.context.router.history.push({\r\n                pathname: '/choose_report',\r\n                state: {\r\n                    group_id: reportId,\r\n                    grade: this.state.grade,\r\n                    examName: this.state.examName,\r\n                    exam_id: this.state.exam_id\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        public render() {\r\n            const props: object = {\r\n                ...this.props,\r\n                ptr: ptr,\r\n                state: this.state,\r\n                refresh: this.refresh.bind(this),\r\n                openReport: this.openReport.bind(this),\r\n                closeOwnModel: this.closeOwnModel.bind(this),\r\n                toReport: this.toReport.bind(this)\r\n            };\r\n            return <WrappedComponent\r\n                {...props}\r\n            >\r\n            </WrappedComponent>\r\n        }\r\n    }\r\n};\r\n\r\nexport default hoc as any;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/examList/examItem/hoc.tsx"],"sourceRoot":""}